# Environment variables
NODE_ENV=development
PORT=3000

# --- Auth & Security ---
# Strong random string; do not commit real secrets. Example only.
JWT_SECRET=dev-change-me-super-secret
# Access token lifetime
JWT_EXPIRES_IN=15m
JWT_ISSUER=swifteats
JWT_AUDIENCE=swifteats-api

# Base64-encoded 32-byte key for AES-256-GCM
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
ENCRYPTION_KEY=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=

# --- Security Configuration ---
# SSL/TLS Configuration
SSL_KEY_PATH=/etc/ssl/private/server.key
SSL_CERT_PATH=/etc/ssl/certs/server.crt

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REDIS_URL=redis://localhost:6379
RATE_LIMIT_DEFAULT_TTL=900

# Security Audit Logging
SECURITY_AUDIT_ENABLED=true
SIEM_ENABLED=false
SIEM_ENDPOINT=

# API Key Management
API_KEY_ROTATION_ENABLED=true
API_KEY_DEFAULT_EXPIRY_DAYS=90

# GDPR Compliance
GDPR_COMPLIANCE_ENABLED=true
DATA_RETENTION_ENABLED=true
PRIVACY_POLICY_VERSION=1.0

# --- OAuth2 (Google) ---
# Obtain from Google Cloud Console (OAuth 2.0 Client IDs)
OAUTH_GOOGLE_CLIENT_ID=
OAUTH_GOOGLE_CLIENT_SECRET=

# --- Catalog Cache & CDN ---
# memory (default) or redis
CACHE_PROVIDER=memory
# Required if CACHE_PROVIDER=redis, e.g. redis://localhost:6379
REDIS_URL=
# Optional prefix for namespacing keys
REDIS_KEY_PREFIX=se
# Optional CDN base URL for rewriting menu item image URLs, e.g. https://cdn.example.com
CDN_BASE_URL=

# --- Driver Tracking ---
# WebSocket configuration
WS_PORT=3001

# PostgreSQL with PostGIS for geospatial data
PG_HOST=localhost
PG_PORT=5432
PG_USER=postgresnew
PG_PASSWORD=postgres
PG_DATABASE=swifteats

# TypeORM Database Configuration
DB_SYNCHRONIZE=false
DB_LOGGING=true
DB_SSL=false
DB_POOL_SIZE=10
DB_POOL_MIN_SIZE=2
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=10000
DB_STATEMENT_TIMEOUT=30000
DB_CONNECT_TIMEOUT=10000
DB_ENTITIES_PATH=dist/**/*.entity.js
DB_MIGRATIONS_PATH=dist/migrations/*.js
DB_MIGRATIONS_TABLE_NAME=migrations
DB_MIGRATIONS_RUN=false

# Message Queue for location updates
LOCATION_QUEUE_CONCURRENCY=5
LOCATION_BATCH_SIZE=100
LOCATION_BATCH_INTERVAL_MS=1000

# Driver tracking settings
DRIVER_LOCATION_TTL_SECONDS=300
MAX_CONCURRENT_CONNECTIONS=10000
CLIENT_POLLING_INTERVAL_MS=1000

# --- Observability & Monitoring ---
# Service name for metrics, logs, and traces
SERVICE_NAME=swifteats-backend

# Metrics
METRICS_PREFIX=swifteats_
METRICS_PORT=9090

# Logging
LOG_LEVEL=info
ELASTICSEARCH_ENABLED=false
ELASTICSEARCH_NODE=http://localhost:9200
ELASTICSEARCH_INDEX_PREFIX=swifteats-logs
ELASTICSEARCH_BULK_SIZE=100
ELASTICSEARCH_FLUSH_INTERVAL=5000

# Tracing
TRACING_ENABLED=false
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# Alerting
ALERTING_ENABLED=false
ALERT_MANAGER_URL=http://localhost:9093/api/v2/alerts

# Lag Monitoring
LAG_MONITORING_ENABLED=true
LAG_CHECK_INTERVAL=15000

# --- Disaster Recovery & Backup ---
# Backup Configuration
BACKUP_ENABLED=true
BACKUP_DIRECTORY=~/Desktop/AI Native/food-delivery-platform/backups/swifteats
BACKUP_FULL_SCHEDULE=0 2 * * 0
BACKUP_INCREMENTAL_SCHEDULE=0 2 * * 1-6
BACKUP_TRANSACTION_LOG_SCHEDULE=*/15 * * * *
BACKUP_RETENTION_DAYS=30
BACKUP_MAX_SIZE_GB=100
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION=true
BACKUP_VERIFICATION=true

# Remote Storage for Backups
BACKUP_REMOTE_STORAGE=false
BACKUP_REMOTE_PROVIDER=aws
BACKUP_REMOTE_BUCKET=swifteats-backups
BACKUP_REMOTE_REGION=us-east-1
BACKUP_REMOTE_ACCESS_KEY=
BACKUP_REMOTE_SECRET_KEY=

# Database Replication
REPLICATION_ENABLED=true
REPLICATION_MODE=streaming
REPLICA_HOSTS=replica1.example.com,replica2.example.com
REPLICATION_USER=replicator
REPLICATION_PASSWORD=replication_password
REPLICATION_SLOTS=replica_slot_1,replica_slot_2
SYNCHRONOUS_COMMIT=false
MAX_WAL_SENDERS=10
WAL_KEEP_SEGMENTS=32
ARCHIVE_MODE=true
ARCHIVE_COMMAND=cp %p ~/Desktop/AI Native/food-delivery-platform/pg_archive/%f

# Disaster Recovery
DR_ENABLED=true
DR_PRIMARY_REGION=us-east-1
DR_SECONDARY_REGION=us-west-2
DR_FAILOVER_THRESHOLD_MINUTES=5
DR_AUTO_FAILOVER_ENABLED=false
DR_HEALTH_CHECK_INTERVAL=60000
DR_REPLICATION_LAG_THRESHOLD=300
DR_TEST_SCHEDULE=0 2 * * 0

# Backup Verification
BACKUP_VERIFICATION_ENABLED=true
BACKUP_VERIFICATION_SCHEDULE=0 4 * * *
VERIFICATION_CHECKSUM=true
VERIFICATION_STRUCTURE=true
VERIFICATION_DATA_INTEGRITY=true
VERIFICATION_RESTORE_TEST=false
VERIFICATION_TEST_DB=swifteats_verification
VERIFICATION_MAX_TIME_MINUTES=60
VERIFICATION_RETENTION_DAYS=90
VERIFICATION_DIRECTORY=~/Desktop/AI Native/food-delivery-platform/backups/verification

# Backup Retention
RETENTION_COMPRESSION_ENABLED=true
RETENTION_ENCRYPTION_ENABLED=false
VERIFY_BEFORE_DELETE=true
RETENTION_DRY_RUN=false
ARCHIVE_STORAGE_ENABLED=true
ARCHIVE_STORAGE_LOCATION=local
ARCHIVE_DIRECTORY=~/Desktop/AI Native/food-delivery-platform/archives/swifteats

# Database Connection (Secondary)
DB_SECONDARY_HOST=localhost-secondary
DB_SECONDARY_PORT=5432
DB_SECONDARY_USERNAME=postgres
DB_SECONDARY_PASSWORD=postgres
DB_SECONDARY_DATABASE=swifteats
